<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Badminton Tournament</title>
    <style>
        body {
            font-family: Arial;
            max-width: 1400px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #333;
        }
        
        .form-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        
        h3 {
            margin: 0 0 15px 0;
            color: #333;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        .btn {
            background: #333;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: #555;
        }
        
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .team-box {
            padding: 12px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .hidden {
            display: none;
        }
        
        .schedule-output {
            margin-top: 20px;
        }
        
        .round-section {
            margin-bottom: 30px;
            padding: 15px;
            background: #fafafa;
            border-radius: 5px;
        }
        
        .round-title {
            font-weight: bold;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #ddd;
            font-size: 16px;
        }
        
        .courts-table {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .court-column {
            background: white;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .court-header {
            font-weight: bold;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #333;
            font-size: 15px;
            color: #333;
        }
        
        .game-row {
            padding: 10px;
            margin-bottom: 8px;
            border: 1px solid #eee;
            border-radius: 3px;
            background: #fafafa;
        }
        
        .game-row:nth-child(even) {
            background: white;
        }
        
        .score-inputs {
            margin-top: 6px;
        }
        
        .score-inputs input {
            width: 45px;
            display: inline-block;
            text-align: center;
            padding: 4px;
        }
        
        .action-btns {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .action-btns button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .autosave {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            background: #28a745;
            color: white;
            border-radius: 4px;
            display: none;
            z-index: 1000;
        }

        .results-section {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e8;
            border-radius: 5px;
        }

        .result-box {
            background: white;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
            border-left: 3px solid #28a745;
        }

        .best-performer {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        .worst-performer {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        /* PRINT STYLES */
        @media print {
            @page {
                size: landscape;
                margin: 0.3in;
            }
            
            body {
                margin: 0;
                padding: 0;
                background: white;
            }
            
            .container {
                padding: 10px;
                box-shadow: none;
            }
            
            /* Hide these when printing */
            .header,
            .action-btns,
            .results-section,
            .autosave {
                display: none !important;
            }
            
            /* Make schedule header smaller */
            .schedule-header {
                margin-bottom: 8px !important;
            }
            
            .schedule-header h2 {
                font-size: 16px !important;
                margin: 0 !important;
            }
            
            .schedule-header p {
                font-size: 11px !important;
                margin: 2px 0 0 0 !important;
            }
            
            /* Make teams legend smaller */
            .teams-legend {
                padding: 6px !important;
                margin-bottom: 8px !important;
            }
            
            .teams-legend h4 {
                font-size: 12px !important;
                margin: 0 0 4px 0 !important;
            }
            
            .teams-legend div {
                font-size: 9px !important;
            }
            
            /* Compact round sections */
            .round-section {
                margin-bottom: 12px !important;
                padding: 8px !important;
                page-break-inside: avoid;
            }
            
            .round-title {
                font-size: 13px !important;
                margin-bottom: 6px !important;
                padding-bottom: 4px !important;
            }
            
            /* Compact court columns */
            .court-column {
                padding: 8px !important;
            }
            
            .court-header {
                font-size: 12px !important;
                margin-bottom: 6px !important;
                padding-bottom: 4px !important;
            }
            
            /* Compact game rows */
            .game-row {
                padding: 4px !important;
                margin-bottom: 3px !important;
                font-size: 10px !important;
            }
            
            .game-row div {
                margin: 2px 0 !important;
            }
            
            .score-inputs {
                margin-top: 2px !important;
            }
            
            .score-inputs input {
                width: 30px !important;
                padding: 2px !important;
                font-size: 10px !important;
            }
        }
    </style>
</head>
<body>
    <div class="autosave" id="autosave">‚úì Saved</div>
    
    <div class="container">
        <div class="header">
            <h1>üè∏ Badminton Tournament</h1>
        </div>
        
        <div id="form">
            <div class="form-section">
                <h3>Tournament Info</h3>
                <div class="form-group">
                    <label>Title:</label>
                    <input type="text" id="title" value="üè∏ Badminton Tournament">
                </div>
                <div class="form-group">
                    <label>Date:</label>
                    <input type="date" id="date">
                </div>
            </div>
            
            <div class="form-section">
                <h3>Setup</h3>
                <div class="form-group">
                    <label>Number of teams:</label>
                    <input type="number" id="numTeams" min="2" max="20" value="4">
                </div>
                <div class="form-group">
                    <label>Players per team:</label>
                    <input type="number" id="playersPerTeam" min="2" max="6" value="3">
                </div>
                <div class="form-group">
                    <label>Number of courts:</label>
                    <input type="number" id="numCourts" min="1" max="10" value="2">
                </div>
                <button class="btn" onclick="setupTeams()">Setup Teams ‚Üí</button>
            </div>
            
            <div id="teamsSection" class="hidden">
                <div class="form-section">
                    <h3>Courts</h3>
                    <div id="courtsContainer"></div>
                </div>
                
                <div class="form-section">
                    <h3>Teams</h3>
                    <div id="teamsContainer"></div>
                    <button class="btn" onclick="generateSchedule()">Generate Schedule</button>
                </div>
            </div>
        </div>
        
        <div id="schedule" class="hidden">
            <div class="action-btns">
                <button onclick="goBack()" style="background:#666;color:white;">‚Üê Back</button>
                <button onclick="calculateResults()" style="background:#007bff;color:white;">üèÜ Results</button>
                <button onclick="clearScores()" style="background:#dc3545;color:white;">Clear</button>
                <button onclick="downloadHTML()" style="background:#28a745;color:white;">Download</button>
            </div>
            <div id="scheduleContent"></div>
            <div id="results" class="hidden results-section"></div>
        </div>
    </div>

    <script>
        document.getElementById('date').value = new Date().toISOString().split('T')[0];
        
        let gameData = [];
        let scheduleData = null;
        
        function setupTeams() {
            const numTeams = parseInt(document.getElementById('numTeams').value);
            const playersPerTeam = parseInt(document.getElementById('playersPerTeam').value);
            const numCourts = parseInt(document.getElementById('numCourts').value);
            
            if (!numTeams || !playersPerTeam || !numCourts) {
                alert('Please fill all fields');
                return;
            }
            
            // Courts
            let html = '<div style="display:flex;gap:10px;flex-wrap:wrap;">';
            for (let i = 1; i <= numCourts; i++) {
                html += `<input type="text" id="court${i}" value="Court ${i}" style="flex:1;min-width:120px;">`;
            }
            html += '</div>';
            document.getElementById('courtsContainer').innerHTML = html;
            
            // Teams
            html = '<div class="team-grid">';
            for (let i = 1; i <= numTeams; i++) {
                html += `<div class="team-box">
                    <h4>Team ${i}</h4>
                    <input type="text" id="team${i}name" placeholder="Team Name" style="margin-bottom:8px;">
                    <div id="team${i}players">`;
                
                for (let j = 1; j <= playersPerTeam; j++) {
                    html += `<input type="text" id="team${i}p${j}" placeholder="Player ${j}" style="margin-bottom:4px;">`;
                }
                
                html += `</div>
                    <button onclick="addPlayer(${i})" style="padding:4px 8px;background:#28a745;color:white;border:none;border-radius:3px;cursor:pointer;margin-top:5px;">+ Player</button>
                </div>`;
            }
            html += '</div>';
            document.getElementById('teamsContainer').innerHTML = html;
            
            document.getElementById('teamsSection').classList.remove('hidden');
            document.getElementById('teamsSection').scrollIntoView({behavior:'smooth'});
        }
        
        function addPlayer(teamNum) {
            const container = document.getElementById(`team${teamNum}players`);
            const count = container.querySelectorAll('input').length + 1;
            const input = document.createElement('input');
            input.type = 'text';
            input.id = `team${teamNum}p${count}`;
            input.placeholder = `Player ${count}`;
            input.style.marginBottom = '4px';
            container.appendChild(input);
        }
        
        function generateSchedule() {
            const numTeams = parseInt(document.getElementById('numTeams').value);
            const numCourts = parseInt(document.getElementById('numCourts').value);
            
            const title = document.getElementById('title').value;
            const date = new Date(document.getElementById('date').value).toLocaleDateString('en-US', {
                year: 'numeric', month: 'short', day: 'numeric'
            });
            
            const courts = [];
            for (let i = 1; i <= numCourts; i++) {
                courts.push(document.getElementById(`court${i}`).value);
            }
            
            const teams = [];
            for (let i = 1; i <= numTeams; i++) {
                const team = {
                    name: document.getElementById(`team${i}name`).value,
                    players: []
                };
                
                const container = document.getElementById(`team${i}players`);
                const inputs = container.querySelectorAll('input');
                inputs.forEach(inp => {
                    if (inp.value.trim()) team.players.push(inp.value.trim());
                });
                
                teams.push(team);
            }
            
            scheduleData = {title, date, courts, teams};
            buildSchedule();
            
            document.getElementById('form').classList.add('hidden');
            document.getElementById('schedule').classList.remove('hidden');
            
            startAutoSave();
        }
        
        function buildSchedule() {
            const {title, date, courts, teams} = scheduleData;
            
            // 4-player rotation
            let p4Counter = {};
            
            function get4Pair(players, teamName) {
                if (!p4Counter[teamName]) p4Counter[teamName] = 0;
                const patterns = [[0,1],[2,3],[0,2],[1,3],[0,3],[1,2]];
                const idx = p4Counter[teamName] % 6;
                p4Counter[teamName]++;
                return [players[patterns[idx][0]], players[patterns[idx][1]]];
            }
            
            function get3Pairs(players) {
                return [[players[0],players[1]], [players[0],players[2]], [players[1],players[2]]];
            }
            
            // All matchups
            const matchups = [];
            for (let i = 0; i < teams.length - 1; i++) {
                for (let j = i + 1; j < teams.length; j++) {
                    matchups.push([i, j]);
                }
            }
            
            let html = `<div class="schedule-header" style="text-align:center;margin-bottom:15px;padding-bottom:8px;border-bottom:1px solid #ddd;">
                <h2 style="margin:0;">${title}</h2>
                <p style="color:#666;margin:3px 0 0 0;">${date}</p>
            </div>
            
            <div class="teams-legend" style="background:#f9f9f9;padding:10px;margin-bottom:15px;border-radius:4px;">
                <h4 style="margin:0 0 6px 0;">Teams</h4>
                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:6px;">
                    ${teams.map(t => `<div style="background:white;padding:4px;border-left:2px solid #333;border-radius:2px;font-size:11px;">
                        <div style="font-weight:bold;">${t.name}</div>
                        <div style="font-size:10px;color:#666;">${t.players.join(', ')}</div>
                    </div>`).join('')}
                </div>
            </div>`;
            
            let gameNum = 1;
            let roundNum = 1;
            gameData = [];
            
            // Schedule rounds
            const scheduled = new Set();
            const rounds = [];
            
            while (scheduled.size < matchups.length) {
                const roundMatchups = [];
                const usedTeams = new Set();
                
                for (let m of matchups) {
                    const key = `${m[0]}-${m[1]}`;
                    if (scheduled.has(key)) continue;
                    
                    if (!usedTeams.has(m[0]) && !usedTeams.has(m[1])) {
                        if (roundMatchups.length < courts.length) {
                            roundMatchups.push(m);
                            scheduled.add(key);
                            usedTeams.add(m[0]);
                            usedTeams.add(m[1]);
                        }
                    }
                }
                
                if (roundMatchups.length > 0) rounds.push(roundMatchups);
            }
            
            // Build HTML
            rounds.forEach(roundMatchups => {
                html += `<div class="round-section">
                    <div class="round-title">Round ${roundNum}</div>
                    <div class="courts-table">`;
                
                // Create columns for each court
                roundMatchups.forEach((m, courtIdx) => {
                    const t1 = teams[m[0]];
                    const t2 = teams[m[1]];
                    const court = courts[courtIdx];
                    
                    // Get pairs
                    if (!m.pairs1) {
                        m.pairs1 = t1.players.length === 4 ? 
                            [get4Pair(t1.players, t1.name), get4Pair(t1.players, t1.name), get4Pair(t1.players, t1.name)] :
                            get3Pairs(t1.players);
                        
                        m.pairs2 = t2.players.length === 4 ?
                            [get4Pair(t2.players, t2.name), get4Pair(t2.players, t2.name), get4Pair(t2.players, t2.name)] :
                            get3Pairs(t2.players);
                    }
                    
                    html += `<div class="court-column">
                        <div class="court-header">${court}: ${t1.name} vs ${t2.name}</div>`;
                    
                    // 3 games for this court
                    for (let g = 0; g < 3; g++) {
                        const p1 = m.pairs1[g];
                        const p2 = m.pairs2[g];
                        
                        gameData.push({
                            team1Pair: p1,
                            team2Pair: p2,
                            team1Name: t1.name,
                            team2Name: t2.name
                        });
                        
                        html += `<div class="game-row">
                            <div><strong>Game ${gameNum}:</strong></div>
                            <div style="margin:4px 0;">${p1[0]} & ${p1[1]} <strong>vs</strong> ${p2[0]} & ${p2[1]}</div>
                            <div class="score-inputs">
                                Score: <input type="number" id="g${gameNum}s1" min="0" max="99" placeholder="0"> - 
                                <input type="number" id="g${gameNum}s2" min="0" max="99" placeholder="0">
                            </div>
                        </div>`;
                        
                        gameNum++;
                    }
                    
                    html += '</div>';
                });
                
                html += '</div></div>';
                roundNum++;
            });
            
            document.getElementById('scheduleContent').innerHTML = html;
            
            // Add score listeners
            setTimeout(() => {
                for (let i = 1; i <= gameData.length; i++) {
                    const s1 = document.getElementById(`g${i}s1`);
                    const s2 = document.getElementById(`g${i}s2`);
                    if (s1 && s2) {
                        s1.oninput = saveScores;
                        s2.oninput = saveScores;
                    }
                }
            }, 100);
        }
        
        function startAutoSave() {
            setInterval(saveScores, 10000);
            window.onbeforeunload = saveScores;
            loadScores();
        }
        
        function saveScores() {
            if (!scheduleData) return;
            const scores = {};
            for (let i = 1; i <= gameData.length; i++) {
                const s1 = document.getElementById(`g${i}s1`);
                const s2 = document.getElementById(`g${i}s2`);
                if (s1 && s2) {
                    scores[i] = {s1: s1.value, s2: s2.value};
                }
            }
            localStorage.setItem('badminton', JSON.stringify({scheduleData, scores}));
            
            const ind = document.getElementById('autosave');
            ind.style.display = 'block';
            setTimeout(() => ind.style.display = 'none', 2000);
        }
        
        function loadScores() {
            const data = localStorage.getItem('badminton');
            if (!data) return;
            try {
                const {scores} = JSON.parse(data);
                setTimeout(() => {
                    for (let i = 1; i <= gameData.length; i++) {
                        const s1 = document.getElementById(`g${i}s1`);
                        const s2 = document.getElementById(`g${i}s2`);
                        if (s1 && s2 && scores[i]) {
                            s1.value = scores[i].s1 || '';
                            s2.value = scores[i].s2 || '';
                        }
                    }
                }, 200);
            } catch(e) {}
        }
        
        function goBack() {
            if (confirm('Save and go back?')) {
                saveScores();
                document.getElementById('form').classList.remove('hidden');
                document.getElementById('schedule').classList.add('hidden');
            }
        }
        
        function clearScores() {
            if (confirm('Clear all scores?')) {
                for (let i = 1; i <= gameData.length; i++) {
                    const s1 = document.getElementById(`g${i}s1`);
                    const s2 = document.getElementById(`g${i}s2`);
                    if (s1 && s2) {
                        s1.value = '';
                        s2.value = '';
                    }
                }
                localStorage.removeItem('badminton');
                document.getElementById('results').classList.add('hidden');
            }
        }
        
        function calculateResults() {
            const teamStats = {};
            const pairStats = {};
            
            scheduleData.teams.forEach(t => {
                teamStats[t.name] = {wins:0, losses:0, pf:0, pa:0};
            });
            
            let count = 0;
            for (let i = 1; i <= gameData.length; i++) {
                const s1 = document.getElementById(`g${i}s1`);
                const s2 = document.getElementById(`g${i}s2`);
                if (s1?.value && s2?.value) {
                    count++;
                    const sc1 = parseInt(s1.value);
                    const sc2 = parseInt(s2.value);
                    const g = gameData[i-1];
                    
                    if (sc1 > sc2) {
                        teamStats[g.team1Name].wins++;
                        teamStats[g.team2Name].losses++;
                    } else {
                        teamStats[g.team2Name].wins++;
                        teamStats[g.team1Name].losses++;
                    }
                    
                    teamStats[g.team1Name].pf += sc1;
                    teamStats[g.team1Name].pa += sc2;
                    teamStats[g.team2Name].pf += sc2;
                    teamStats[g.team2Name].pa += sc1;
                    
                    // Track pair stats
                    const pair1 = `${g.team1Pair[0]} & ${g.team1Pair[1]}`;
                    const pair2 = `${g.team2Pair[0]} & ${g.team2Pair[1]}`;
                    
                    if (!pairStats[pair1]) pairStats[pair1] = {wins:0, losses:0, pf:0, pa:0, team: g.team1Name};
                    if (!pairStats[pair2]) pairStats[pair2] = {wins:0, losses:0, pf:0, pa:0, team: g.team2Name};
                    
                    if (sc1 > sc2) {
                        pairStats[pair1].wins++;
                        pairStats[pair1].pf += sc1;
                        pairStats[pair1].pa += sc2;
                        pairStats[pair2].losses++;
                        pairStats[pair2].pf += sc2;
                        pairStats[pair2].pa += sc1;
                    } else {
                        pairStats[pair2].wins++;
                        pairStats[pair2].pf += sc2;
                        pairStats[pair2].pa += sc1;
                        pairStats[pair1].losses++;
                        pairStats[pair1].pf += sc1;
                        pairStats[pair1].pa += sc2;
                    }
                }
            }
            
            if (count === 0) {
                alert('Enter scores first!');
                return;
            }
            
            const results = Object.entries(teamStats)
                .map(([name, s]) => ({name, ...s, diff: s.pf - s.pa}))
                .sort((a,b) => b.wins - a.wins || b.diff - a.diff);
            
            const pairResults = Object.entries(pairStats)
                .map(([pair, s]) => ({pair, ...s, diff: s.pf - s.pa}))
                .sort((a,b) => b.wins - a.wins || b.diff - a.diff);
            
            const bestPairs = pairResults.slice(0, 3);
            const worstPairs = pairResults.slice(-3).reverse();
            const bestDefense = pairResults.filter(p => p.pa > 0).sort((a,b) => a.pa - b.pa).slice(0, 3);
            
            let html = `<h3>üèÜ Tournament Results</h3>
                
                <div class="result-box">
                    <strong>üìä Games Completed:</strong> ${count} of ${gameData.length}
                </div>
                
                <div class="result-box">
                    <strong>üèÜ Tournament Leader:</strong> ${results[0].name} (${results[0].wins}W-${results[0].losses}L, ${results[0].diff>0?'+':''}${results[0].diff} diff)
                </div>
                
                <div class="result-box">
                    <strong>üìä Team Standings:</strong>
                    <ol style="margin:8px 0 0 20px;">
                        ${results.map(r => 
                            `<li>${r.name}: ${r.wins}W-${r.losses}L, ${r.diff>0?'+':''}${r.diff} diff (${r.pf} for, ${r.pa} against)</li>`
                        ).join('')}
                    </ol>
                </div>
                
                <div class="result-box best-performer">
                    <strong>‚≠ê Best Pair Performers (Most Wins):</strong>
                    <ol style="margin:8px 0 0 20px;">
                        ${bestPairs.map(p => 
                            `<li>${p.pair} (${p.team}): ${p.wins}W-${p.losses}L, ${p.diff>0?'+':''}${p.diff} diff</li>`
                        ).join('')}
                    </ol>
                </div>
                
                <div class="result-box worst-performer">
                    <strong>‚ö†Ô∏è Struggling Pairs (Fewest Wins):</strong>
                    <ol style="margin:8px 0 0 20px;">
                        ${worstPairs.map(p => 
                            `<li>${p.pair} (${p.team}): ${p.wins}W-${p.losses}L, ${p.diff>0?'+':''}${p.diff} diff</li>`
                        ).join('')}
                    </ol>
                </div>
                
                <div class="result-box">
                    <strong>üéØ Best Defense (Fewest Points Against):</strong>
                    <ol style="margin:8px 0 0 20px;">
                        ${bestDefense.map(p => 
                            `<li>${p.pair} (${p.team}): ${p.pa} points against</li>`
                        ).join('')}
                    </ol>
                </div>`;
            
            document.getElementById('results').innerHTML = html;
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({behavior:'smooth'});
        }
        
        function downloadHTML() {
            const content = document.getElementById('scheduleContent').innerHTML;
            const html = `<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>${scheduleData.title}</title>
<style>
@page { size: landscape; margin: 0.3in; }
body{font-family:Arial;margin:10px;background:white;font-size:10px;} 
.schedule-header{text-align:center;margin-bottom:8px;padding-bottom:6px;border-bottom:1px solid #ddd;}
.schedule-header h2{margin:0;font-size:16px;}
.schedule-header p{margin:2px 0 0 0;font-size:11px;color:#666;}
.teams-legend{background:#f9f9f9;padding:6px;margin-bottom:8px;border-radius:3px;}
.teams-legend h4{margin:0 0 4px 0;font-size:12px;}
.teams-legend div{font-size:9px;}
.game-row{padding:4px;border:1px solid #eee;margin:3px 0;background:#fafafa;border-radius:2px;font-size:10px;} 
.round-section{margin:8px 0;padding:8px;background:#fafafa;border-radius:4px;page-break-inside:avoid;} 
.court-column{border:1px solid #ddd;padding:8px;border-radius:3px;background:white;} 
.courts-table{display:grid;grid-template-columns:1fr 1fr;gap:12px;} 
.court-header{font-weight:bold;margin-bottom:6px;padding-bottom:4px;border-bottom:1px solid #ddd;font-size:12px;}
.round-title{font-weight:bold;margin-bottom:6px;padding-bottom:4px;border-bottom:1px solid #ddd;font-size:13px;}
.score-inputs input{width:30px;padding:2px;font-size:10px;}
</style>
</head>
<body>${content}</body>
</html>`;
            
            const blob = new Blob([html], {type:'text/html'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'badminton-schedule.html';
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
